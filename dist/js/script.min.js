"use strict";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[data-button="add-photo"]'),t=document.querySelector('[data-modal="add-photo"]'),a=t.querySelector(".modal__message"),o=t.querySelector(".modal__form"),c=o.querySelector('[data-input="url"]'),l=o.querySelector('[data-input="name"]'),n=document.querySelector('[data-button="delete-all-photos"]'),d=document.querySelector('[data-modal="delete-all-photos"]'),i=document.querySelector('[data-button="cancel-delete-all-photos"]'),s=document.querySelector('[data-button="confirm-delete-all-photos"]'),r=document.querySelector(".main__empty"),m=document.querySelector(".main__wrapper"),u=document.querySelector(".full-photo");function v(e,t){0!==Object.keys({...localStorage}).length&&(r.style.display="none");const a=document.createElement("div");a.classList.add("main__item"),a.innerHTML=`\n        <div class="main__photo">\n            <img src="${t}" alt="photo">\n        </div>\n        <div class="main__name"><p>${e}</p></div> \n        `,m.appendChild(a)}function p(e,t){e.classList.add(t)}function _(e,t){e.classList.remove(t)}!function(){if(0!==Object.keys({...localStorage}).length){r.style.display="none";let e={};Object.keys({...localStorage}).sort().forEach((t=>(e[t]={...localStorage}[t],e)));for(let t in e)v(t,e[t])}}(),e.addEventListener("click",(()=>{o.reset(),a.innerText="",p(t,"modal_active"),o.addEventListener("submit",(e=>{!function(e,t){const a=[null,void 0,""];return!(a.includes(e)||a.includes(t)||Object.keys({...localStorage}).includes(e)||(localStorage.setItem(e,t),v(e,t),0))}(l.value.toUpperCase(),c.value)?(e.preventDefault(),a.innerText="That name is taken!"):_(t,"modal_active")})),t.addEventListener("click",(e=>{(e.target.matches(".modal")||e.target.matches(".close"))&&_(t,"modal_active")}))})),n.addEventListener("click",(()=>{p(d,"modal_active"),i.addEventListener("click",(()=>{_(d,"modal_active")})),s.addEventListener("click",(()=>{localStorage.clear(),m.innerHTML="",r.style.display="block",_(d,"modal_active")})),d.addEventListener("click",(e=>{(e.target.matches(".modal")||e.target.matches(".close"))&&_(d,"modal_active")}))})),m.addEventListener("click",(e=>{e.target.matches("img")&&(u.querySelector("img").src=e.target.src,p(u,"full-photo_active"))})),u.addEventListener("click",(e=>{(e.target.matches(".full-photo")||e.target.matches(".close"))&&_(u,"full-photo_active")})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&u.classList.contains("full-photo_active")&&_(u,"full-photo_active"),"Escape"===e.code&&t.classList.contains("modal_active")&&_(t,"modal_active"),"Escape"===e.code&&d.classList.contains("modal_active")&&_(d,"modal_active")}))}));