"use strict";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[data-function="open-modal"]'),t=document.querySelector(".modal"),a=t.querySelector(".modal__message"),o=t.querySelector(".modal__form"),c=o.querySelector('[data-input="url"]'),n=o.querySelector('[data-input="name"]'),l=document.querySelector(".main__empty"),i=document.querySelector(".main__wrapper"),s=document.querySelector(".full-photo");function r(e,t){0!==Object.keys({...localStorage}).length&&(l.style.display="none");const a=document.createElement("div");a.classList.add("main__item"),a.innerHTML=`\n        <div class="main__photo">\n            <img src="${t}" alt="photo">\n        </div>\n        <div class="main__name"><p>${e}</p></div> \n        `,i.appendChild(a)}function d(e,t){e.classList.add(t)}function u(e,t){e.classList.remove(t)}!function(){if(0!==Object.keys({...localStorage}).length){l.style.display="none";let e={};Object.keys({...localStorage}).sort().forEach((t=>(e[t]={...localStorage}[t],e)));for(let t in e)r(t,e[t])}}(),e.addEventListener("click",(e=>{o.reset(),a.innerText="",d(t,"modal_active")})),t.addEventListener("click",(e=>{(e.target.matches(".modal")||e.target.matches(".close"))&&u(t,"modal_active")})),o.addEventListener("submit",(e=>{e.preventDefault(),!function(e,t){const a=[null,void 0,""];return!(a.includes(e)||a.includes(t)||Object.keys({...localStorage}).includes(e)||(localStorage.setItem(e,t),r(e,t),0))}(n.value.toUpperCase(),c.value)?a.innerText="That name is taken!":u(t,"modal_active")})),i.addEventListener("click",(e=>{e.target.matches("img")&&(s.querySelector("img").src=e.target.src,d(s,"full-photo_active"))})),s.addEventListener("click",(e=>{(e.target.matches(".full-photo")||e.target.matches(".close"))&&u(s,"full-photo_active")})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&s.classList.contains("full-photo_active")&&u(s,"full-photo_active"),"Escape"===e.code&&t.classList.contains("modal_active")&&u(t,"modal_active")}))}));