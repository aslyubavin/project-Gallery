"use strict";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[data-button="add-photo"]'),t=document.querySelector('[data-modal="add-photo"]'),a=t.querySelector(".modal__message"),o=t.querySelector(".modal__form"),l=o.querySelector('[data-input="url"]'),c=o.querySelector('[data-input="name"]'),n=document.querySelector('[data-button="delete-all-photos"]'),d=document.querySelector('[data-modal="delete-all-photos"]'),s=document.querySelector('[data-button="cancel-delete-all-photos"]'),i=document.querySelector('[data-button="confirm-delete-all-photos"]'),r=document.querySelector(".main__empty"),m=document.querySelector(".main__wrapper"),u=document.querySelector(".full-photo");function p(e,t){0!==Object.keys({...localStorage}).length&&(r.style.display="none");const a=document.createElement("div");a.classList.add("main__item"),a.setAttribute("data-name",e),a.innerHTML=`\n        <div class="main__photo">\n            <img src="${t}" alt="photo">\n            <span class="icon-delete" data-button="delete-photo"></span>\n        </div>\n        <div class="main__name"><p>${e}</p></div> \n        `,m.appendChild(a)}function v(e,t){e.classList.add(t)}function h(e,t){e.classList.remove(t)}!function(){if(0!==Object.keys({...localStorage}).length){r.style.display="none";let e={};Object.keys({...localStorage}).sort().forEach((t=>(e[t]={...localStorage}[t],e)));for(let t in e)p(t,e[t])}}(),e.addEventListener("click",(()=>{o.reset(),a.innerText="",v(t,"modal_active"),o.addEventListener("submit",(e=>{!function(e,t){const a=[null,void 0,""];return!(a.includes(e)||a.includes(t)||Object.keys({...localStorage}).includes(e)||(localStorage.setItem(e,t),p(e,t),0))}(c.value.toUpperCase(),l.value)?(e.preventDefault(),a.innerText="That name is taken!"):h(t,"modal_active")})),t.addEventListener("click",(e=>{(e.target.matches(".modal")||e.target.matches(".close"))&&h(t,"modal_active")}))})),n.addEventListener("click",(()=>{v(d,"modal_active"),s.addEventListener("click",(()=>{h(d,"modal_active")})),i.addEventListener("click",(()=>{localStorage.clear(),m.innerHTML="",r.style.display="block",h(d,"modal_active")})),d.addEventListener("click",(e=>{(e.target.matches(".modal")||e.target.matches(".close"))&&h(d,"modal_active")}))})),m.addEventListener("click",(e=>{if(e.target.matches("img")&&(u.querySelector("img").src=e.target.src,v(u,"full-photo_active")),e.target.matches('[data-button="delete-photo"]')){const t=e.target.parentElement.parentElement;t.remove(),localStorage.removeItem(t.getAttribute("data-name")),0===Object.keys({...localStorage}).length&&(r.style.display="block")}})),u.addEventListener("click",(e=>{(e.target.matches(".full-photo")||e.target.matches(".close"))&&h(u,"full-photo_active")})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&u.classList.contains("full-photo_active")&&h(u,"full-photo_active"),"Escape"===e.code&&t.classList.contains("modal_active")&&h(t,"modal_active"),"Escape"===e.code&&d.classList.contains("modal_active")&&h(d,"modal_active")}))}));